<!DOCTYPE html>
<html lang="zh">
<head>

        <title>用Pelican和Github Pages在Linux上搭建个人博客</title>
        <meta charset="utf-8" />
        <link href="http://commonq.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="CommonQ's Blog Full Atom Feed" />
        <link href="http://commonq.github.io/feeds/blog.atom.xml" type="application/atom+xml" rel="alternate" title="CommonQ's Blog Categories Atom Feed" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="http://commonq.github.io/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="http://commonq.github.io/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="http://commonq.github.io/theme/pygment.css" />

        <script src="http://commonq.github.io/theme/js/libs/modernizr-2.6.2.min.js"></script>






</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="http://commonq.github.io">CommonQ's Blog <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="http://commonq.github.io">Home</a></li>

                  <li><a href="http://commonq.github.io/category/android.html">Android</a></li>
                  <li class="active"><a href="http://commonq.github.io/category/blog.html">Blog</a></li>
                  <li><a href="http://commonq.github.io/category/mood.html">Mood</a></li>

              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="http://commonq.github.io/build_my_blog.html" rel="bookmark"
                   title="Permalink to 用Pelican和Github Pages在Linux上搭建个人博客">用Pelican和Github Pages在Linux上搭建个人博客</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="2014-04-22T00:00:00">
                Tue 22 April 2014
              </abbr>
              <address class="vcard author">
                By <a class="url fn" href="http://commonq.github.io/author/commonq.html">CommonQ</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <h3>搭建环境</h3>
<p>在<code>Linux</code>环境下搭建，采用<code>ubuntu</code>，使用其它发行版过程基本相同。</p>
<h3>Github Pages</h3>
<ul>
<li>注册<code>Github</code>,注册和配置<code>SSH</code>密钥过程<a href="http://help.github.com/articles/set-up-git">help page</a>写得很清楚。</li>
<li>不过现在github支持http传输良好，所以也可以不用配置ＳＳＨ，通过用户名密码即可登录。</li>
<li>在Github创建一个名为username.github.io的版本库（将username替换成自己的Github账户名）。</li>
<li>Setting -&gt; Automatic page generator -&gt; Continue to layout，选择一个模板，并发布。</li>
</ul>
<p>十分钟后在<code>username.github.io</code>页面就已经生成了一个页面。访问该网址即可看到。</p>
<h3>配置本地环境</h3>
<h4>安装Ｐｅｌｉｃａｎ和Ｍａｒｋｄｏｗｎ：</h4>
<p>在这里我没有用<code>Jekyll</code>因为它是<code>Ｒｕｂｙ</code>写的对它没什么兴趣。所以我采用<code>Ｐｙｔｈｏｎ</code>编写的<code>Ｐｅｌｉｃａｎ</code>。</p>
<h4>介绍</h4>
<p><code>Pelican</code>是一套开源的使用<code>Python</code>编写的博客静态生成, 可以添加文章和和创建页面, 可以使用<code>MarkDown</code> <code>reStructuredText</code> 和 <code>AsiiDoc</code> 的格式来抒写, 同时使用 <code>Disqus</code>评论系统, 支持 <code>RSS</code>和<code>Atom</code>输出, 插件, 主题, 代码高亮等功能, 采用<code>Jajin2</code>模板引擎, 可以很容易的更改模板</p>
<h4>安装</h4>
<p>安装<code>Ｐｅｌｉｃａｎ</code>有很多种方法。一种使用<code>ｐｙｔｈｏｎ</code>的包管理器<code>ｐｉｐ</code>进行安装。</p>
<div class="highlight"><pre><span class="nv">$sudo</span> apt-get install python-pip
<span class="nv">$sudo</span> pip install pelican
<span class="nv">$sudo</span> pip install markdown
</pre></div>


<p>另一种就是从<code>ｇｉｔｈｕｂ</code>上克隆<code>Ｐｅｌｉｃａｎ</code>。</p>
<div class="highlight"><pre>git clone git://github.com/getpelican/pelican.git       
<span class="nb">cd </span>pelican
python setup.py install
</pre></div>


<h3>写第一篇博客</h3>
<h4>搭建目录</h4>
<div class="highlight"><pre>mkdir blog
<span class="nb">cd </span>blog
pelican-quickstart
</pre></div>


<p>在回答一系列问题过后你的博客就建成的, 主要生成下列文件:
生成的目录结构:</p>
<div class="highlight"><pre>blog/
├── content
│   └── *.md             <span class="c"># markdown文件</span>
├── output               <span class="c"># 默认的输出目录</span>
├── develop_server.sh
├── Makefile
├── pelicanconf.py       <span class="c"># 主配置文件</span>
└── publishconf.py
</pre></div>


<h4>写一篇文章</h4>
<p>在 <code>content</code>目录新建一个 <code>test.md</code>文件, 填入一下内容:</p>
<div class="highlight"><pre><span class="nl">Title:</span> <span class="err">文章标题</span>
<span class="nl">Date:</span> <span class="mi">2013</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">18</span>
<span class="nl">Category:</span> <span class="err">文章类别</span>
<span class="nl">Tag:</span> <span class="err">标签</span><span class="mi">1</span><span class="p">,</span> <span class="err">标签</span><span class="mi">2</span>
<span class="err">这里是内容</span>
</pre></div>


<p>然后执行</p>
<div class="highlight"><pre>make html
</pre></div>


<p>生成了<code>ｈｔｍｌ</code>。然后执行</p>
<div class="highlight"><pre>./develop_server.sh start
</pre></div>


<p>开启一个测试服务器, 这会在本地 8000 端口建立一个测试web服务器, 可以使用浏览器打开:<code>http://localhost:8000</code>来访问这个测试服务器, 然后就可以欣赏到你的博客了</p>
<h4>创建一个Ａｂｏｕｔ页面</h4>
<p>这里以创建 About页面为例</p>
<p>在<code>content</code>目录创建pages目录</p>
<div class="highlight"><pre>mkdir content/pages
</pre></div>


<p>然后创建<code>About.md</code>并填入下面内容</p>
<div class="highlight"><pre><span class="n">Title</span><span class="o">:</span> <span class="n">About</span> <span class="n">Me</span>
<span class="n">Date</span><span class="o">:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">18</span>

<span class="n">About</span> <span class="n">me</span> <span class="n">content</span>
</pre></div>


<p>执行 <code>make html</code> 生成<code>html</code>, 然后打开<code>http://localhost:8000</code>查看效果</p>
<h3>使用Ｐｅｌｉｃａｎ支持评论</h3>
<p>使用<a href="http://disqus.com/">Disqus</a>作为评论系统，注册帐号后直接在pelicanconf.conf中添加:</p>
<div class="highlight"><pre><span class="n">DISQUS_SITENAME</span> <span class="o">=</span> <span class="n">your_shortname</span>
</pre></div>


<p>然后执行</p>
<div class="highlight"><pre>make html
</pre></div>


<p>使用浏览器打开:<code>http://localhost:8000</code>来查看效果</p>
<h3>主题</h3>
<p>安装主题：
Ｐｅｌｉｃａｎ本身提供很多主题可供选择，可以从<code>ｇｉｔｈｕｂ</code>上<code>ｃｌｏｎｅ</code>下来</p>
<div class="highlight"><pre>git clone https://github.com/getpelican/pelican-themes.git
<span class="nb">cd </span>pelican-themes
pelican-themes -i bootstrap2
</pre></div>


<p>其中<code>bootstrap2</code>是选择使用的主题，<a href="http://github.com/getpelican/pelican-themes">pelican主题的Github目录</a>下几乎每个都提供了预览.</p>
<p>然后，在配置文件<code>pelicanconf.py</code>中添加：</p>
<div class="highlight"><pre><span class="n">THEME</span> <span class="o">=</span> <span class="s">u&quot;bootstrap2&#39;</span>
</pre></div>


<p>重新make，就生成了带有选定主题的页面。</p>
<h3>使用插件</h3>
<p><code>Pelican</code> 一开始是将插件内置的, 但是新版本 <code>Pelican</code>将插件隔离了出来, 所以我们要到github上 克隆一份新的插件, 在博客目录执行</p>
<div class="highlight"><pre>git clone git://github.com/getpelican/pelican-plugins.git    
</pre></div>


<p>现在我们博客目录就新添了一个 <code>pelican-plugins</code>目录, 我们已配置sitemap插件为例, sitemap插件可以生成 sitemap.xml 供搜索引擎使用</p>
<p>在<code>pelicanconf.py</code>配置文件里加上如下项:</p>
<div class="highlight"><pre><span class="n">PLUGIN_PATH</span> <span class="o">=</span> <span class="s">u&quot;pelican-plugins&quot;</span>

<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;sitemap&quot;</span><span class="p">]</span>
</pre></div>


<p>配置sitemap 插件</p>
<div class="highlight"><pre><span class="n">SITEMAP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;format&quot;</span><span class="p">:</span> <span class="s">&quot;xml&quot;</span><span class="p">,</span>
    <span class="s">&quot;priorities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&quot;articles&quot;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span>
        <span class="s">&quot;indexes&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="s">&quot;pages&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&quot;changefreqs&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&quot;articles&quot;</span><span class="p">:</span> <span class="s">&quot;monthly&quot;</span><span class="p">,</span>
        <span class="s">&quot;indexes&quot;</span><span class="p">:</span> <span class="s">&quot;daily&quot;</span><span class="p">,</span>
        <span class="s">&quot;pages&quot;</span><span class="p">:</span> <span class="s">&quot;monthly&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>然后再执行</p>
<div class="highlight"><pre>make html
</pre></div>


<p>打开浏览器请求 <code>http://localhost:8000/sitemap.xml</code>即可看到生成的 Sitemap 了</p>
<h3>添加Google Analytics</h3>
<p>去Google Analytics申请账号，记下跟踪ID。 在pelicanconf.py添加</p>
<div class="highlight"><pre><span class="n">GOOGLE_ANALYTICS</span> <span class="o">=</span> <span class="err">跟踪</span><span class="n">ID</span>
</pre></div>


<h3>使用Google Webmasters</h3>
<p>在<a href="http://www.google.com/webmasters/">Google Webmasters</a>上注册即可。
这个就是Google站长工具，使用它的目的是为了让博客被Google更好的收录，比如手动让Googlebot抓取、提交Robots、更新Sitemap等等，各方面完爆百度站长工具。</p>
<h3>上传Ｇｉｔｈｕｂ</h3>
<p>最后在你的<code>ｏｕｔｐｕｔ</code>文件夹内</p>
<div class="highlight"><pre>git init
git add .
git commit -m <span class="s1">&#39;first commit&#39;</span> 
git remote add origin git@github.com:yourname/yourname.github.io.git
git push -u origin master
</pre></div>


<p>这样就大功告成了！</p>
            </div><!-- /.entry-content -->
            <div class="comments">
              <h3>Comments</h3>
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_identifier = "build_my_blog.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://commonq.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
            </div>


        </div><!-- /.eleven.columns -->
        
<div class="three columns">

<h4>Pages</h4>

 <ul>
        <li><a href="http://commonq.github.io/category/android.html">Android</a></li>
        <li class="active"><a href="http://commonq.github.io/category/blog.html">Blog</a></li>
        <li><a href="http://commonq.github.io/category/mood.html">Mood</a></li>
  </ul>

<h4>Categories</h4>
<ul>
		<li><a href="http://commonq.github.io/category/android.html">Android</a></li>
		<li><a href="http://commonq.github.io/category/blog.html">Blog</a></li>
		<li><a href="http://commonq.github.io/category/mood.html">Mood</a></li>
</ul>


<h4>Tags</h4>
	<ul>
	    <li class="tag-4"><a href="http://commonq.github.io/tag/mood.html">Mood</a></li>
	    <li class="tag-1"><a href="http://commonq.github.io/tag/ndk.html">NDK</a></li>
	    <li class="tag-2"><a href="http://commonq.github.io/tag/blog.html">Blog</a></li>
	    <li class="tag-1"><a href="http://commonq.github.io/tag/android.html">Android</a></li>
	    <li class="tag-4"><a href="http://commonq.github.io/tag/github.html">Github</a></li>
	    <li class="tag-4"><a href="http://commonq.github.io/tag/linux.html">Linux</a></li>
	    <li class="tag-4"><a href="http://commonq.github.io/tag/pelican.html">Pelican</a></li>
</ul>


<nav class="widget">
  <h4>Social</h4>
  <ul>
    <li><a href="https://github.com/CommonQ">Github</a></li>
    <li><a href="http://weibo.com/u/1239942131">新浪微博</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">

                <li><div class="btn primary"><a href="https://github.com/CommonQ/commonq.github.io" target="_blank">Github</a></div></li>




              </ul>
            </div>
          </div>
        </footer>

    </div>


<script type="text/javascript">
    var disqus_shortname = 'commonq';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
  <script src="http://commonq.github.io/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="http://commonq.github.io/theme/js/libs/gumby.min.js"></script>
  <script src="http://commonq.github.io/theme/js/plugins.js"></script>
</body>
</html>